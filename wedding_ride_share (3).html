
<!DOCTYPE html>
<html>
<head>
    <title>Wedding Ride Share Board</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background-color: #f9f9f9; }
        h1 { color: #333; }
        form { margin-bottom: 20px; }
        input[type="text"], input[type="tel"], input[type="time"] {
            padding: 8px;
            margin: 5px;
            width: 200px;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: left;
        }
        th {
            background-color: #eee;
        }
        #map { height: 400px; margin-top: 20px; }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
    <h1>Wedding Ride Share Board</h1>
    <form id="rideForm">
        <input type="text" id="name" placeholder="Your Name" required>
        <input type="text" id="location" placeholder="Starting Location" required>
        <input type="tel" id="phone" placeholder="Telephone Number" required>
        <input type="text" id="date" placeholder="Date (DD.MM)" required>
        <input type="time" id="time" required>
        <select id="seats" required>
            <option value="">Seats Available</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4+">4+</option>
        </select>
        <button type="submit">Submit</button>
    </form>
    <table id="rideBoard">
        <thead>
            <tr>
                <th>Name</th>
                <th>Starting Location</th>
                <th>Telephone</th>
                <th>Departure</th>
                <th>Seats</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const form = document.getElementById('rideForm');
        const tableBody = document.querySelector('#rideBoard tbody');
        const map = L.map('map').setView([51.505, -0.09], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
        }).addTo(map);

        function loadEntries() {
            const entries = JSON.parse(localStorage.getItem('rideEntries') || '[]');
            tableBody.innerHTML = '';
            entries.forEach(entry => {
                addRow(entry);
                addMarker(entry);
            });
        }

        function addRow(entry) {
            const row = tableBody.insertRow();
            row.insertCell(0).textContent = entry.name;
            row.insertCell(1).textContent = entry.location;
            row.insertCell(2).textContent = entry.phone;
            row.insertCell(3).textContent = entry.date + ' at ' + entry.time;
            row.insertCell(4).textContent = entry.seats;
        }

        function addMarker(entry) {
            fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(entry.location)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        const lat = data[0].lat;
                        const lon = data[0].lon;
                        L.marker([lat, lon]).addTo(map)
                            .bindPopup(`<b>${entry.name}</b><br>${entry.location}<br>${entry.date} at ${entry.time}<br>Seats: ${entry.seats}`);
                    }
                });
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const entry = {
                name: document.getElementById('name').value,
                location: document.getElementById('location').value,
                phone: document.getElementById('phone').value,
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                seats: document.getElementById('seats').value
            };
            const entries = JSON.parse(localStorage.getItem('rideEntries') || '[]');
            entries.push(entry);
            localStorage.setItem('rideEntries', JSON.stringify(entries));
            addRow(entry);
            addMarker(entry);
            form.reset();
        });

        loadEntries();
    </script>
</body>
</html>
